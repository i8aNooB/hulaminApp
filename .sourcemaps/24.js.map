{"version":3,"sources":["../../src/pages/layout/form/form-result/form-result.module.ts","../../src/pages/layout/form/form-result/form-result.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { FormResultPage } from './form-result';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FormResultPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(FormResultPage),\r\n  ],\r\n  exports: [\r\n    FormResultPage\r\n  ]\r\n})\r\nexport class FormResultPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/layout/form/form-result/form-result.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController , AlertController , ToastController } from 'ionic-angular';\r\n\r\nimport { AngularFireDatabase,AngularFireList } from '@angular/fire/database';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-form-result',\r\n  templateUrl: 'form-result.html'\r\n})\r\nexport class FormResultPage {\r\n    messages: Observable<any[]>;\r\n    messagesRef: AngularFireList<any>;\r\n    authState: boolean = false;\r\n    messagesArray : any=[]; \r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams , \r\n    public loadingCtrl: LoadingController , \r\n    public  alertCtrl: AlertController , \r\n    private toastCtrl: ToastController, \r\n    public afDB: AngularFireDatabase, \r\n    public afAuth: AngularFireAuth) {\r\n\r\n    // get authentication  from firebase \r\n    this.afAuth.authState.subscribe(auth => {\r\n      if(auth) {\r\n        // User already logged in\r\n        this.authState = true;\r\n      } else {\r\n        // Not logged in\r\n        console.log('auth false');\r\n        this.authState = false;\r\n      }\r\n    });\r\n\r\n    let loadingPopup = this.loadingCtrl.create({\r\n      spinner: 'crescent', \r\n      content: ''\r\n    });\r\n    loadingPopup.present();\r\n\r\n    this.messagesRef = afDB.list('/message');\r\n    // Use snapshotChanges().map() to store the key ( id )\r\n    this.messages = this.messagesRef.snapshotChanges().pipe(\r\n      map(changes => \r\n        changes.map(c => ({ key: c.payload.key, ...c.payload.val() }))\r\n      ) \r\n     \r\n    );\r\n    setTimeout(() => {\r\n      loadingPopup.dismiss();\r\n    }, 1000);\r\n\r\n  }\r\n\r\n\r\n//######## CRUD #########//\r\n\r\n // Create //\r\n  createMessage(){\r\n    // check user permission\r\n    if(this.authState){\r\n      this.navCtrl.push('FormPage'); \r\n    }else{\r\n      this.presentToast('bottom','No permission : Please login', 3000);  \r\n      this.navCtrl.setRoot('MainPage');   \r\n    }\r\n  }\r\n\r\n// Update //\r\n\r\n  updateCategory(key: string, title, description ){\r\n\r\n    // check user permission \r\n    if(this.authState){\r\n      // User already logged in\r\n      let prompt = this.alertCtrl.create({\r\n        title: 'Message ',\r\n        message: \"Update message\",\r\n        enableBackdropDismiss: false,\r\n        inputs: [\r\n          {\r\n            name: 'title',\r\n            placeholder: 'Title message',\r\n            value: title\r\n          },\r\n          {\r\n            name: 'description',\r\n            placeholder: 'Body message',\r\n            value: description\r\n          },\r\n        ],\r\n        buttons: [\r\n          {\r\n            text: 'Cancel',\r\n            handler: data => {\r\n              console.log('Cancel clicked');\r\n            }\r\n          },\r\n          {\r\n            text: 'Save',\r\n            handler: data => {\r\n              this.messagesRef.update(key, {\r\n                messageTitle: data.title,\r\n                messageBody: data.description\r\n              });\r\n            }\r\n          }\r\n        ]\r\n      });\r\n      prompt.present();\r\n      //this.messagesRef.remove(key); \r\n    }else{\r\n      // permission denied\r\n      this.presentToast('bottom','No permission : Please login', 3000);    \r\n      this.navCtrl.setRoot('MainPage'); \r\n    }\r\n\r\n  }\r\n\r\n\r\n// Delete //\r\n  deleteMessage(key: string) {  \r\n    console.log(\"deleteMessage\");\r\n    // check user permission\r\n    if(this.authState){\r\n      this.presentToast('bottom','Removed', 1000);\r\n      console.log(\"start to delete from messageId=\"+key)\r\n      console.log(\"key=\"+key)\r\n      this.messagesRef.remove(key); \r\n    }else{\r\n      this.presentToast('bottom','No permission : Please login', 3000); \r\n      this.navCtrl.setRoot('MainPage');    \r\n    }\r\n  }\r\n\r\n  presentToast(position: string,message: string ,duration: number) {\r\n    let toast = this.toastCtrl.create({\r\n      message: message,\r\n      position: position,\r\n      duration: duration\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/layout/form/form-result/form-result.ts"],"sourceRoot":""}